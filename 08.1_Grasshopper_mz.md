# Grasshopper Tutorial
---

## Content

*Just jump to the topic you are looking for*

- [Introduction](#introduction)
- [Lets start Grasshopper](#lets-start-grasshopper)
- [Interface and Workplace](#interface-and-workplace)
- [How to use the Components](#how-to-use-components)
- [Connection between Rhino and Grasshopper](#connection-between-rhino-and-grasshopper)
- [Data in Grasshopper](#data-in-grasshopper)
- [Manipulating the In-/Output Data](#manipulating-the-in--and-output-data)
- [How to install a Plugin](#how-to-install-a-plugin)
- [Shortcuts](#shortcuts)
- [Links to further Tutorials](#links-to-further-tutorials)

---

## Introduction

Welcome to the wonderful new world of Grasshopper. For designers who are exploring new shapes using generative algorithms, Grasshopper® is a graphical algorithm editor that takes advantage of Rhino‘s existing tools. Grasshopper offers new ways to expand and control the 3D design and modeling processes, including automating repetitive processes; generating geometry through mathematical functions; quickly making changes to complex models; and creating complex forms through repetitions of simple geometry. Grasshopper requires no programming or scripting knowledge, but still allows designers a high degree of flexibility in creating both simple and complex forms.

Since version Rhino 6, Grasshopper is directly included in Rhino as a plugin. This means that Grasshopper is installed together with Rhino 6. Thus, updates always lead to improvements in both programs.

Therefore it is very simple to start Grasshopper from the Rhino. You only need to type „Grasshopper“ into the Rhino command prompt and confirm then the plug-in will start automatically.

The conjunction with the Grasshopper plugin makes the product package particularly interesting for architects and engineers. Structures can be parameterized as desired via a clear, visual programming interface. This means that objects can be generated in Rhino using coding. These objects can be modified and adapted with the parameters in Grasshopper which then affects the object in Rhino.

This tutorial should give you an overview about the program itself as well as the navigation and the basic components. Further it shows how the program connects with Rhino and some important shortcuts for a smoother usage.

---

## Lets start Grasshopper

By typing „Grasshopper“ into the Rhino command prompt the plug-in will load automatically and this main Grasshopper window will show up:

![Grasshopper_22_StartGrasshopper.png](doc/Grasshopper_22_StartGrasshopper.png)

---

## Interface and workplace


![Grasshopper_m1.png](doc/Grasshopper_m1.png)

>1. The main menu bar:
The menu is similar to typical Windows menus. Each menu shows more commands to edit the set	tings or the canvas itself as well as the shortcuts to these commands.
>2. File browser control:
By clicking on the file name it opens the dropdown menu which can be used to switch between different loaded files.
>3. Component panels:
This area exposes all component categories. All components belong to a certain category (such as „Params“ for all primitive data types or „Curves“ for all curve related tools) and all categories are available as unique toolbar panels. The height and width of the toolbars can be adjusted, allowing for more or fewer on-screen buttons per category. The toolbar panels themselves contain all the components that belong to that category. Since there are a potentially large number of these, it only shows the most recently used items. In order to see the entire collection, you have to click on the bar at the
bottom of the Panel:

![Grasshopper_m2.png](doc/Grasshopper_m2.png)

>4. The canvas:
The canvas is the main workplace where all the components will be arranged. The canvas toolbar provides quick access to a number of frequently used features. All the tools are available through the menu as well, and you can hide the toolbar if you like. (It can be re-enabled from the View menu).

![Grasshopper_m3.png](doc/Grasshopper_m3.png)

>A) Opens a Grasshopper file (.gh or .ghx)
>B) Save the current file
>C)	Zoom defaults
>D) Zoom Extents (will adjust the zoom-factor if the definition is too  large to fit on the screen)
>E)	Create a named view (choose between all named views by klicking on the tiny arrow nest to it)
>F) Sketch tool:
 	The sketch tool works like most pencil-type tools of Photoshop or Window‘s Paint. Default controls of the sketch tools allow changes of line weight, line type, and color. However, it can be quite difficult to draw straight lines or pre-defined shapes. In order to solve this problem, draw out any sketch line onto the canvas. Right click on the line, and select „Load from Rhino“, and select any pre-defined shape in your Rhino scene (This can be any 2d shape like a rectangle, circle, star...etc.). Once you have selected your referenced shape, hit Enter, and your previously drawn sketch line will be reconfigured to your Rhino reference shape.
G) Don‘t draw any preview geometry
H) Draw wireframe preview geometry
J) Draw shaded preview geometry
K) Draw a preview boundary on the canvas to exclude objects. Press ESCAPE to remove any existing boundary
L) Only draw preview geometry for selected objects
M) Document preview settings
N) Preview mesh quality

>Objects on the canvas are usually color coded to provide feedback about their state:

![Grasshopper_m4.png](doc/Grasshopper_m4.png)

>A) All selected objects are drawn with a green overlay.
>B) Parameter which contains neither warnings nor errors.
>C) Parameter which contains warnings is displayed as an orange box. Most para meters are orange when you drop them onto the canvas since the lack of data is considered to be a warning.
>D) Component which contains neither warnings nor errors.
>E) Component is always a more involved object, since it contains input and output parameters. This particular component has at least 1 warning associated with it. You can find warning and errors through the context menu of objects.
>F) Component which contains at least 1 error. The error can come either from the component itself or from one of its input/output parameters. We will learn more about Component Structures in the following chapters.

---

## How to use Components

Every Component can be added with drag and drop to the canvas or by double clicking to the canvas and start typing the name.Alternative you can also click space.

![Grasshopper_01_Component](doc/Grasshopper_01_Component.png)

#### Component basics

![Grasshopper_02_ComponentBasic.png](doc/Grasshopper_02_ComponentBasic.png)

>If you stay longer with the cursor over a input i window will pop up with more information about the type of input which is needed.
Right Click to set one (or multiple inputs). In this case you don‘t have to connect an input

#### Zoom-In interface

![Grasshopper_03_Zoominterface.png](doc/Grasshopper_03_Zoominterface.png)

>Some components offer additional inputs if you zoom in. With the plus (+) and minus (-) you can add or remove inputs from the component if needed.


---

## Connection between Rhino and Grasshopper

Input and outputs from Grasshopper are strongly connected with the workspace inside of Rhino. A
Object from Rhino can be a Grasshopper Input but it can also be generated with Grasshopper and
then be used in Rhino. The command to make objects from Grasshopper editable is called „bake“.

![Grasshopper_23_ConnectionRhinoGH.png](doc/Grasshopper_23_ConnectionRhinoGH.png)

>Here we can see Rhino and Grasshopper side by side. Inside of the rhino workspace are three
sphere placed. The color shows you the origin of each. The grey one on the left is generated in
Rhino with the command „sphere“. It is also editable and can interact with other rhino objects. The
red one in the middle is generated with the sphere component from rhino. The red color basically
means that you not have selected it inside of grasshopper (it is the output from the component on
the top in grasshopper). Inside of Grasshopper there is a sphere component activated (left click
on a component to highligth i). This output is also green inside of the Rhino window (sphere on the
right)

#### Transfer output from Grasshopper to Rhino

![Grasshopper_24_Bake.png](doc/Grasshopper_24_Bake.png)

>Red and green illustrated outputs from Grasshopper inside of Rhino are not editable with rhino and cant interact with an rhino object. To do that you can „bake“ geometry. Simply right click on the output you would like to transfer to rhino and choos „bake“

![Grasshopper_25_Bake.png](doc/Grasshopper_25_Bake.png)

>A window will show up. Here you can define on which layer you would like to place the geometry after baking it as well as the coulor, display mode and so on. Click ok to finally bake it.

![Grasshopper_26_Bake.png](doc/Grasshopper_26_Bake.png)

>Now we have baked the right sphere and it is now the same as the one we originally created with the sphere command in rhino (the one on the left). It is now disconnected from the intelligent grasshopper output that we had before.

---

## Data in Grasshopper


#### Distributing data

![Grasshopper_04_DatainGrasshopper.png](doc/Grasshopper_04_DatainGrasshopper.png)

>The Data can be distributed to this items basicly in three different ways: internal, referenced (right click on the component), or external as an output of another component.

#### Storing data

![Grasshopper_05_DatainGrasshopper.png](doc/Grasshopper_05_DatainGrasshopper.png)

>Data in Grasshopper is stored in three different ways: Single, List, and Data Tree

#### List

![Grasshopper_06_List.png](doc/Grasshopper_06_List.png)

>A list stores your data. Each Data has a specific position inside of the list called the index-number. The data can be everything that Grasshopper knows it can also be nothing (a empty position). With the following components you can manipulate and change your list.
For example: split list, shift list, list leght, list item...

On the following link you can find all type of list operations in an overview:
http://wiki.bk.tudelft.nl/toi-pedia/Grasshopper_Basic_List_Actions

#### Data-Tree

![Grasshopper_07_DataTree.png](doc/Grasshopper_07_DataTree.png)

>Some components create an output of multiple datas. They are stored in so called Data-Trees. It basicly works like a folder structure on your computer. It is a list of a list.

![Grasshopper_08_DataTree.png](doc/Grasshopper_08_DataTree.png)

>You can view the data tree with the „param viewer“ component. The image above shows a single branceh (0:0). This main branche has nine sub-branches witch start with the number of the parent branche. So the first one is (0:0:0) second one (0:0:1) and so on. It allows you to specifie the location of the data inside of the tree.

---

## Manipulating the In- and Output Data

By right clicking on the in- or output of an component you can choose different options to manipulate the data. The options are Reverse, Flatten, Graft, Simplify and Expression.

#### Reverse

![Grasshopper_09_Reverse.png](doc/Grasshopper_09_Reverse.png)

>Reverse
By activating the Reverse function either on the input or the output it will reverse the data structure in it. (for example Data on index 0 is now on index 10)

![Grasshopper_10_Reverse.png](doc/Grasshopper_10_Reverse.png)

#### Graft / Flatten

To understand this function we have to understand how grasshopper manages and organises data. Datas are stored in trees. And each tree has a branche. Graft and Flatten are opponents. Flatten is the opposite of Graft.
The Component „Graft Tree“ of „Flatten Tree“ will do the same as the shown options.
In this example we create a series of points (ten points with a distance of 10 from each other along the z axes).
We will now have a look at this command on an example:

![Grasshopper_11_GraftandFlatten.png](doc/Grasshopper_11_GraftandFlatten.png)

>we create a series which counts 10 steps and each step shifts by 10 along the z axis.

![Grasshopper_12_GraftandFlatten.png](doc/Grasshopper_12_GraftandFlatten.png)

>This example creates us one branche (or group). The name of this is listed on the top (0,0). Further down we see that we have 10 points with an index from 0 to 9. As well as the coordinate of each point.

![Grasshopper_13GrafandFlatten.png](doc/Grasshopper_13GrafandFlatten.png)

>Now we can right-click ont the output of the „construct Point“ component and click on graft.

![Grasshopper_14_GraftandFlatten.png](doc/Grasshopper_14_GraftandFlatten.png)

>Graft basicly means that grasshopper now puts every point into a seperate branche (or group). Branche 1 is (0;0;0), Branche 2 is (0;0;1) and so on.
This effects the datastructure for further manipulation. If we now try to move this points along the x axis they will react differently.

![Grasshopper_15_GraftandFlatten.png](doc/Grasshopper_15_GraftandFlatten.png)

>With this definition we move 5 points along the x axis by a step of 10

![Grasshopper_16_GraftandFlatten.png](doc/Grasshopper_16_GraftandFlatten.png)

>If all points are in the same branche grasshopper moves the first five points of the branche by 10 and the rest of the data will have the same position as the 5th position

![Grasshopper_17_GraftandFlatten.png](doc/Grasshopper_17_GraftandFlatten.png)

>But if we graft the data before this defintion will move inside of each branche the starting point with a unit of 10 and five times.

![Grasshopper_18_GraftandFlatten.png](doc/Grasshopper_18_GraftandFlatten.png)

>an overview with all steps from graft to flatten a list

#### Simplify

![Grasshopper_19_Simplify.png](doc/Grasshopper_19_Simplify.png)

>Simplify basicly means that you reduce the branches to a single number. Graft created groups with a data path (0,0,1) and simplify reduces this datapath. The new groups are now just (0), (1) and so on.
Also visible in the Parametric Viewer. We now dont create branches, we create now trunks of datatrees.
The Component „Simplify-Tree“ will do the same (see picture bellow).

![Grasshopper_20_Simplify.png](doc/Grasshopper_20_Simplify.png)

#### Expression

![doc/Grasshopper_21_Expression.png](doc/Grasshopper_21_Expression.png)

>The expression option allows you to manipulate the data with a mathimatical expression (in this example x*2, so the data will be scaled by factor 2).
You can also use the „expression“ componant for the same result. It is a little bit more user friendly.

---

## How to install a Plugin

A plugin is a software component that adds a specific feature to an existing computer program.
Grasshopper allows as well as Rhino to install plugins. These small components allow extensions and simplify a certain operation.

#### Installation

The installation is quite simple and only needs a few steps.
Shown here as an example with the "Docofossor" plugin. It is a terrain modeling plugin for Rhino and Grasshopper. It enables easy editing of cut and fill operations for landscape architecture.  

>1. Download the plug-in and unzip the downloaded zip-folder

![Grasshopper_m5.png](doc/Grasshopper_m5.png)


>2. Launch Rhino and run the **Grasshopper** command.

![Grasshopper_m7.png](doc/Grasshopper_m7.png)

>3. Open *File* > *Special Folders* > *Components Folder*

![Grasshopper_m8.png](doc/Grasshopper_m8.png)

>4. Copy the the .ghpy file from the unziped folder in the window that opened. Close the window when done .

![Grasshopper_m9.png](doc/Grasshopper_m9.png)

>5. The Docofossor panel will appear as a component panel togehter with the new all its tools.

![Grasshopper_m10.png](doc/Grasshopper_m10.png)

---

## Shortcuts

| Shortcut      | Description |
| ----------- | ----------- |
| Hold left and select | Select things in the canvas |
| Hold right and move | Move the canvas |
| Ctrl + Z | Undo |
| Ctrl + Z | Redo |
| Ctrl + X | Cut out |
| Ctrl + C | Copy the component |
| Ctrl + V | Paste next to the copied component |
| Ctrl + Shift + V | Paste in the middle of the window |
| Space or double left click | Opens command prompt to type in the name of the component |
| Shift  + dragging from one to another component | Connects to the component even there is already one connection existing (it allows multiple connections for one component) |
| Ctrl + dragging from one to another component | Disconnects the only one connection |
| Alt + hold left | Extends your canvas horizontally (keeps existing components as they were) |
| Alt + hold left + Alt | Extends your canvas vertically (keeps existing components as they were) |
| Hold left on component + Alt and drag	 | Copy the component and move it to wherever you want |
| Ctrl + Alt + Hold left on component  | Shows the location of the component in the toolbar |
| Mark component + hold Ctrl + left arrow | Jump automatically to the beginning of the wire and the previous component |
| Mark component + hold Ctrl + right arrow | Jumps automatically to the end of the wire |
| Mark component + hold Ctrl + Shift + left arrow | Selects all components connected to the marked one |
| Ctrl + Shift + Q | Generates a screenshot which could be edited and the Rhino screen could be placed as well |
| Ctrl + Q | Hides all selected components from the Rhino view
| Ctrl + Shift + I | Selects all components except the selected ones |
| Ctrl + Shift + drag by holding left | Drag all connected wires to another component |

---

## Links to further Tutorials

https://static1.squarespace.com/static/51c6f9f3e4b0e47ad1bbc71c/t/521cf940e4b021571fc7d3a5/1377630528615/Grasshopper+Primer_Second+Edition_090323.pdf

http://s3.amazonaws.com/mcneel/grasshopper/1.0/docs/en/AlgorithmicModelling.pdf

https://grasshopperdocs.com/
